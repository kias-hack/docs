Создание копий проектов, файлов, архивов папок
==============================================

## Tar
Tar позволяет создавать архивы файлов и папок
> tar <опции> <название архива> <файлы для архивации>
* `-c` создает новый архив
* `-x` извлекает данные из архива
* `-v` выводить подробную информацию
* `-t` список содержимого архива
* `-z` перенаправить вывод в gzip для архивов .tar.bz2 для сжатия и при распаковке
* `-j` перенаправить вывод в bzip2 для архивов .tar.gz для сжатия и при распаковке
* `-f` файл для записи архива 

> Пример создания архива со сжатием и без вывода дополнительной информации  
> tar -czf archive.tar.gz <файлы или папка>

> Пример распаковки сжатого архива без вывода дополнительной информации  
> tar -xzf archive.tar.gz <куда распаковать>

Монтирование удаленного sftp как файловую систему у себя
========================================================

## sshfs

> `sshfs <username>@<host or ip>:<full path to need folder> <path to folder on your system>`

где 

* username - имя пользователя в системе
* host or ip - доменное имя или IP адрес
* full path to need folder - полный путь к папке которую нужно примонтировать (относительные и пути начинающиеся с ~ не работаю!!!)
* path to folder on your system - путь куда нужно монтировать удаленную папку на вашей системе

Пример

> sshfs myname@82.12.11.111:/var/www/ /home/my/ftp/folder

Чтобы размонтировать необходимо использовать команду `fusermount` с параметром `-u`

> fusermount -u /home/my/ftp/folder

Сравнение файлов
================

## diff [options] [file1] [file2]

* `-q` - выводить только отличия файлов
* `-s` - выводить только совпадающие части
* `-c` - выводить нужное количество строк после совпадений
* `-u` - выводить только нужное количество строк после отличий
* `-y` - выводить в две колонки
* `-e` - вывод в формате ed скрипта
* `-n` - вывод в формате RCS
* `-a` - сравнивать файлы как текстовые, даже если они не текстовые
* `-t` - заменить табуляции на пробелы в выводе
* `-l` - разделить на страницы и добавить поддержку листания
* `-r` - рекурсивное сравнение папок
* `-i` - игнорировать регистр
* `-E` - игнорировать изменения в табуляциях
* `-Z` - не учитывать пробелы в конце строки
* `-b` - не учитывать пробелы
* `-B` - не учитывать пустые строки
  
Для указания что было изменено в строке используются следующие символы

* `a` - добавлена
* `d` - удалена
* `c` - изменена
  
Линии которые отличаются обозначаются символом `<`, а те которые не совпадают `>`
  
### Создание патча

С помощью опции -u можено создать патч, который потом может быть наложен на такой же файл другим пользователем

### Рекурсивная проверка в директориях
  
Чтобы обработать несколько файлов в папке удобно использовать опцию -r

> diff -r ~/tmp1 ~/tmp2
  
Патчи для текстовых файлов
==========================
  
## patch 
  
> patch [options] [originalfile] [patchfile] > patchingfile
  
* `i [patchfile]` - читает информацию из патч файла
* `-r rejectfile` - 
* `-N` - когда патч не применяется, утилита patch обычно пытается определить, выглядит ли ситуация так, как если бы патч уже был применен. Эта опция отключает это поведение
* `-pnum | strip=num` - Обрезает части пути к файлу, разделяемые символом косой черты до уровня, указанного в параметре num. Например: p0 оставит путь /u/john/src/blurfl/blurfl.cpp неизменным, а p4 обрежет тот же путь до blurfl/blurfl.cpp.
* `-o [outpufile]` - Отправляет вывод в указываемый в параметре outputfile файл
* `-E` - удаляет файлы, оказавшиеся пустыми после применения патча
* `-dry-run` - печатает рузультаты применения патча без реальной модификации файлов
* `-R | --reverse` - Откатывает все изменения (если возможно)
* `-c | --context` - Интерпретирует файл патча как обычный контекстный формат, генерируемый утилитой diff
* `-b | backup` - Создаёт резервную копию оригинального файла вместо его удаления

### Пример создания файла с патчем

> patch [originalfile] -i [contextpatch] -o [newpatchedfile]

### Пример накатывания патча в проект

> patch -p0 -E < `project-patch`

### Пример отката патча

> patch -p0 -R < `project-patch`

### Проверка что патчи подходят

> patch -p0 --dry-run < `patch`

### Создание резервной копии файлов

> patch -b -p0 < `project-patch`
